---
import { translations, type Language, getLocalizedHref } from '../../scripts/translations';
import type { BlogCategory } from '../../types/blog';
import { blogCategories } from '../../types/blog';

export interface Props {
  lang?: Language;
  currentCategory?: BlogCategory | 'all';
}

const { lang = 'cs', currentCategory = 'all' } = Astro.props;
const t = translations[lang];

// Helper for localized links
const href = (path: string) => getLocalizedHref(path, lang);
---

<div class="flex flex-wrap items-center gap-3 mb-12">
  <!-- All Category -->
  <a 
    href={href("/blog")} 
    class={`px-4 py-2 rounded-full text-sm font-medium transition-all duration-300 ${
      currentCategory === 'all' 
        ? 'bg-white text-neutral-900' 
        : 'bg-white/5 text-neutral-400 hover:bg-white/10 hover:text-white border border-white/10'
    }`}
  >
    {t.blog_category_all}
  </a>
  
  <!-- Dynamic Categories -->
  {blogCategories.map((category) => {
    const isActive = currentCategory === category.id;
    const name = lang === 'cs' ? category.name_cs : category.name_en;
    
    // Color mapping for categories
    const activeColors = {
      'success-story': 'bg-primary text-white',
      'tutorial': 'bg-orange-500 text-white'
    };
    
    const inactiveColors = {
      'success-story': 'bg-primary/10 text-primary border-primary/30 hover:bg-primary/20',
      'tutorial': 'bg-orange-500/10 text-orange-400 border-orange-500/30 hover:bg-orange-500/20'
    };
    
    return (
      <a 
        href={href(`/blog?category=${category.id}`)}
        class={`px-4 py-2 rounded-full text-sm font-medium flex items-center gap-2 transition-all duration-300 ${
          isActive 
            ? activeColors[category.id] 
            : `${inactiveColors[category.id]} border`
        }`}
        aria-current={isActive ? 'page' : undefined}
      >
        <iconify-icon icon={category.icon} class="text-base" aria-hidden="true"></iconify-icon>
        {name}
      </a>
    );
  })}
</div>

