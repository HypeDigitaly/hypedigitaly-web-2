---
import { translations, type Language, getLocalizedHref } from '../../scripts/translations';
import clientsData from '../../data/clients.json';

export interface Props {
  lang?: Language;
  sectionNumber?: string;
  id?: string;
}

const { lang = 'cs', sectionNumber = '05', id = 'pripadove-studie' } = Astro.props;
const t = translations[lang];

// Helper for localized links
const href = (path: string) => getLocalizedHref(path, lang);

// Get clients with stats
const clientsWithStats = clientsData.clients.filter(c => c.stats);
---

<section id={id} class="bg-[#050505] border-t border-white/5 py-24">
  <div class="max-w-7xl mx-auto px-6">
    <div class="flex flex-col md:flex-row justify-between items-start md:items-end mb-16 text-[10px] md:text-xs font-mono text-neutral-400 uppercase tracking-[0.2em] gap-4">
      <div class="flex items-center gap-2">
        <span class="text-white">{sectionNumber}</span>
        <span class="w-12 h-px bg-white/10"></span>
      </div>
      <div class="text-white/40">{t.cases_tag}</div>
      <div class="hidden md:block text-right">{t.cases_label}</div>
    </div>

    <div class="text-center max-w-5xl mx-auto mb-16">
      <h2 class="animate-on-scroll [animation:animationIn_0.8s_ease-out_0.2s_both] leading-[0.95] md:text-6xl lg:text-7xl text-3xl font-medium text-white tracking-tighter mb-8">
        <span>{t.cases_headline_1}</span>
        <span class="text-neutral-400 transition-colors hover:text-primary duration-500">{t.cases_headline_2}</span>
      </h2>
    </div>

    <!-- Featured Case Study -->
    <div class="animate-on-scroll [animation:animationIn_0.8s_ease-out_0.3s_both] mb-8 p-8 bg-gradient-to-br from-primary/10 via-[#0A0A0A] to-[#0A0A0A] border border-primary/30 rounded-2xl">
      <div class="flex items-center gap-2 mb-6">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="text-primary"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2Zm-7 14h-2v-4h2v4Zm4 0h-2v-6h2v6Zm-8 0H6v-2h2v2Z"/></svg>
        <span class="text-sm font-bold text-primary uppercase tracking-wider">{t.cases_featured}</span>
      </div>
      <h3 class="text-2xl md:text-3xl font-bold text-white mb-4">{t.cases_featured_title}</h3>
      <p class="text-neutral-400 mb-8 max-w-3xl">{t.cases_featured_desc}</p>
      
      <div class="grid grid-cols-2 md:grid-cols-4 gap-6 mb-8">
        <div class="text-center p-4 bg-white/5 rounded-xl">
          <div class="text-3xl md:text-4xl font-bold text-white mb-1">35,095</div>
          <div class="text-xs text-neutral-400 uppercase tracking-wider">{t.cases_metric_1}</div>
        </div>
        <div class="text-center p-4 bg-white/5 rounded-xl">
          <div class="text-3xl md:text-4xl font-bold text-primary mb-1">4.57/5</div>
          <div class="text-xs text-neutral-400 uppercase tracking-wider">{t.cases_metric_2}</div>
        </div>
        <div class="text-center p-4 bg-white/5 rounded-xl">
          <div class="text-3xl md:text-4xl font-bold text-white mb-1">102%</div>
          <div class="text-xs text-neutral-400 uppercase tracking-wider">{t.cases_metric_3}</div>
        </div>
        <div class="text-center p-4 bg-white/5 rounded-xl">
          <div class="text-3xl md:text-4xl font-bold text-white mb-1">1.8-5.2</div>
          <div class="text-xs text-neutral-400 uppercase tracking-wider">{t.cases_metric_4}</div>
        </div>
      </div>

      <!-- Read Full Study Button -->
      <a href={href("/blog/pripadova-studie-5-kraju-cr")} class="vf-button !py-4 !px-8" style="--vf-bg: #00A39A; --vf-hover-bg: #00C4B4; --vf-glow-rgb: 0, 196, 180;">
        <div class="vf-points-wrapper">
          <i class="vf-point"></i><i class="vf-point"></i><i class="vf-point"></i><i class="vf-point"></i><i class="vf-point"></i>
          <i class="vf-point"></i><i class="vf-point"></i><i class="vf-point"></i><i class="vf-point"></i><i class="vf-point"></i>
        </div>
        <span class="vf-inner !text-lg">
          <span>{t.blog_read_full_study}</span>
          <svg class="vf-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5">
            <path d="M5 12h14"></path>
            <path d="m12 5 7 7-7 7"></path>
          </svg>
        </span>
      </a>
    </div>

    <!-- Individual Case Studies Grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
      {clientsWithStats.map((client, index) => (
        <div class={`animate-on-scroll [animation:animationIn_0.8s_ease-out_${0.4 + index * 0.1}s_both] group p-6 bg-[#0A0A0A] border border-white/5 rounded-2xl hover:border-white/10 transition-all`}>
          <div class="flex items-center gap-3 mb-4">
            <a href={client.url} target="_blank" class="hover:opacity-80 transition-opacity">
              <img src={client.logo} alt={lang === 'cs' ? client.name_cs : client.name_en} class={`h-10 ${client.invert ? 'brightness-0 invert' : ''}`}>
            </a>
          </div>
          <h4 class="font-semibold text-white mb-2">{lang === 'cs' ? client.name_cs : client.name_en}</h4>
          <div class="space-y-2 text-sm">
            <div class="flex justify-between">
              <span class="text-neutral-400">{lang === 'cs' ? 'AI odpovědí:' : 'AI responses:'}</span>
              <span class="text-white font-medium">{client.stats.ai_responses.toLocaleString()}</span>
            </div>
            <div class="flex justify-between">
              <span class="text-neutral-400">{lang === 'cs' ? 'Přesnost:' : 'Accuracy:'}</span>
              <span class="text-primary font-medium">{client.stats.accuracy}%</span>
            </div>
            <div class="flex justify-between">
              <span class="text-neutral-400">{lang === 'cs' ? 'Spokojenost:' : 'Satisfaction:'}</span>
              <span class="text-white font-medium">{client.stats.satisfaction}/5</span>
            </div>
          </div>
        </div>
      ))}
    </div>
  </div>
</section>

