---
import PageLayout from '../layouts/PageLayout.astro';
import ClientsMarquee from '../components/sections/ClientsMarquee.astro';
import AdminPanelUnifiedSection from '../components/sections/AdminPanelUnifiedSection.astro';
import TestimonialsSection from '../components/sections/TestimonialsSection.astro';
import CaseStudiesSection from '../components/sections/CaseStudiesSection.astro';
import TechStackSection from '../components/sections/TechStackSection.astro';
import ServicesOverviewGrid from '../components/sections/ServicesOverviewGrid.astro';
import WorkMethodsGrid from '../components/sections/WorkMethodsGrid.astro';
import ProcessSection from '../components/sections/ProcessSection.astro';
import ProblemSection from '../components/sections/ProblemSection.astro';
import DeliverablesGrid from '../components/sections/DeliverablesGrid.astro';
import YoutubeFacade from '../components/ui/YoutubeFacade.astro';
import { translations, type Language, getLocalizedHref } from '../scripts/translations';
import faqData from '../data/faq.json';

// Server-side rendered page - detects language from URL param or cookie
export const prerender = false;

const url = Astro.url;
const langParam = url.searchParams.get('lang');

// Redirect ?lang=cs to clean URL (Czech is default - keeps URLs clean)
if (langParam === 'cs') {
  const cleanUrl = new URL(Astro.url);
  cleanUrl.searchParams.delete('lang');
  const redirectPath = cleanUrl.pathname + (cleanUrl.search || '') + (cleanUrl.hash || '');
  return Astro.redirect(redirectPath || '/', 301);
}

const cookieLang = Astro.cookies.get('preferredLanguage')?.value;
const lang: Language = (langParam === 'en' || langParam === 'cs') ? langParam : 
                       (cookieLang === 'en' || cookieLang === 'cs') ? cookieLang : 'cs';
const t = translations[lang];

// Set cookie if language was explicitly selected via URL param
if (langParam && (langParam === 'en' || langParam === 'cs')) {
  Astro.cookies.set('preferredLanguage', langParam, { 
    path: '/', 
    maxAge: 60 * 60 * 24 * 365, // 1 year
    sameSite: 'lax'
  });
}

// Helper for localized links
const href = (path: string) => getLocalizedHref(path, lang);

// SEO: FAQ Structured Data
const faqSchema = {
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": faqData.items.map(item => ({
    "@type": "Question",
    "name": lang === 'cs' ? item.question_cs : item.question_en,
    "acceptedAnswer": {
      "@type": "Answer",
      "text": lang === 'cs' ? item.answer_cs : item.answer_en
    }
  }))
};

// SEO: Service Structured Data (main services on homepage)
const SITE_URL = 'https://hypedigitaly.ai';
const serviceSchema = {
  "@context": "https://schema.org",
  "@type": "ItemList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "item": {
        "@type": "Service",
        "name": lang === 'cs' ? "AI Chatbot" : "AI Chatbot",
        "description": lang === 'cs' 
          ? "Inteligentní AI chatbot s 90%+ přesností odpovědí. První v ČR nasazený na krajských webech."
          : "Intelligent AI chatbot with 90%+ response accuracy. First in Czech Republic deployed on regional government websites.",
        "provider": {
          "@type": "Organization",
          "name": "HypeDigitaly"
        },
        "url": `${SITE_URL}/chatbot`,
        "areaServed": {
          "@type": "Country",
          "name": "Czech Republic"
        }
      }
    },
    {
      "@type": "ListItem",
      "position": 2,
      "item": {
        "@type": "Service",
        "name": lang === 'cs' ? "Příprava dat pro AI" : "AI Data Preparation",
        "description": lang === 'cs'
          ? "Připravíme vaše data pro AI tak, aby odpovídala přesně a bez halucinací."
          : "We prepare your data for AI to respond accurately without hallucinations.",
        "provider": {
          "@type": "Organization",
          "name": "HypeDigitaly"
        },
        "url": `${SITE_URL}/priprava-dat`
      }
    },
    {
      "@type": "ListItem",
      "position": 3,
      "item": {
        "@type": "Service",
        "name": lang === 'cs' ? "Konzultace & Podpora" : "Consulting & Support",
        "description": lang === 'cs'
          ? "AI konzultace, audity a partnerství na klíč."
          : "AI consulting, audits and turnkey partnerships.",
        "provider": {
          "@type": "Organization",
          "name": "HypeDigitaly"
        },
        "url": `${SITE_URL}/konzultace`
      }
    }
  ]
};

// Page meta
const pageTitle = lang === 'cs' 
  ? "HypeDigitaly | AI Transformation Partner - První AI agentura v ČR"
  : "HypeDigitaly | AI Transformation Partner - First AI Agency in Czech Republic";
const pageDescription = lang === 'cs'
  ? "HypeDigitaly je AI Transformation Partner. Pomáháme organizacím implementovat AI chatboty, voiceboty, AI agenty a automatizace. Jsme první společnost v ČR, která nasadila AI chatboty na krajské weby."
  : "HypeDigitaly is an AI Transformation Partner. We help organizations implement AI chatbots, voicebots, AI agents and automation. We are the first company in Czech Republic to deploy AI chatbots on regional government websites.";
---

<PageLayout 
  title={pageTitle}
  description={pageDescription}
  lang={lang}
  showCalendar={false}
>
  <!-- FAQ Structured Data -->
  <script slot="head" type="application/ld+json" set:html={JSON.stringify(faqSchema)} />
  
  <!-- Service Structured Data -->
  <script slot="head" type="application/ld+json" set:html={JSON.stringify(serviceSchema)} />

  <!-- ==================== HERO SECTION ==================== -->
  <section class="relative max-w-7xl mx-auto px-4 sm:px-6 pt-12 pb-24 overflow-hidden">
    <div class="text-center max-w-5xl mx-auto relative z-10">
      
      <!-- Badge -->
      <div class="animate-on-scroll [animation:animationIn_0.8s_ease-out_0.1s_both] inline-flex items-center gap-2 px-4 py-2 rounded-full bg-primary/10 border border-primary/20 mb-8" aria-hidden="true">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor" class="text-primary" aria-hidden="true"><path d="M12 15a4 4 0 1 0 0-8a4 4 0 0 0 0 8Z"/><path fill-rule="evenodd" d="M12 1C6.477 1 2 5.477 2 11c0 4.135 2.52 7.682 6.11 9.194l-.24 1.683A1 1 0 0 0 8.86 23h6.28a1 1 0 0 0 .99-1.123l-.24-1.683C19.48 18.682 22 15.135 22 11c0-5.523-4.477-10-10-10Zm0 2a8 8 0 0 0-8 8c0 3.51 2.264 6.49 5.43 7.58a1 1 0 0 1 .68.953l.21 1.467h3.36l.21-1.467a1 1 0 0 1 .68-.953C17.736 17.49 20 14.51 20 11a8 8 0 0 0-8-8Z" clip-rule="evenodd"/></svg>
        <span class="text-sm font-medium text-primary">{t.hero_badge}</span>
      </div>
      
      <!-- Headline -->
      <h1 class="animate-on-scroll [animation:animationIn_0.8s_ease-out_0.2s_both] leading-[0.95] md:text-6xl lg:text-7xl text-4xl font-medium text-white tracking-tighter mb-8">
        <span>{t.hero_headline_1}</span>
        <br class="hidden md:block">
        <span class="text-neutral-400 transition-colors hover:text-primary duration-500">{t.hero_headline_2}</span>
      </h1>
      
      <!-- Subheadline -->
      <p class="animate-on-scroll [animation:animationIn_0.8s_ease-out_0.3s_both] text-lg md:text-xl text-neutral-400 font-light max-w-3xl mx-auto leading-relaxed tracking-tight mb-6">
        {t.hero_subheadline}
      </p>
      
      <!-- Sub-subheadline -->
      <p class="animate-on-scroll [animation:animationIn_0.8s_ease-out_0.35s_both] text-base text-neutral-400 font-medium max-w-2xl mx-auto leading-relaxed mb-12">
        {t.hero_subheadline_2}
      </p>
      
      <!-- Hero CTA -->
      <div class="animate-on-scroll [animation:animationIn_0.8s_ease-out_0.4s_both] max-w-md mx-auto mb-8">
        <a href="#kontakt" class="shiny-cta group">
          <span class="btn-content">
            <span class="text-lg font-semibold tracking-tight">{t.hero_cta}</span>
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 text-white/80 group-hover:translate-x-1 transition-transform">
              <path d="M5 12h14"></path>
              <path d="m12 5 7 7-7 7"></path>
            </svg>
          </span>
        </a>
      </div>
      
      <!-- Trust Signals -->
      <div class="animate-on-scroll [animation:animationIn_0.8s_ease-out_0.5s_both] flex flex-wrap items-center justify-center gap-6 text-sm text-neutral-400 font-medium mb-16">
        <span class="flex items-center gap-2">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor" class="text-primary" aria-hidden="true"><path d="M12 15a4 4 0 1 0 0-8a4 4 0 0 0 0 8Z"/><path fill-rule="evenodd" d="M12 1C6.477 1 2 5.477 2 11c0 4.135 2.52 7.682 6.11 9.194l-.24 1.683A1 1 0 0 0 8.86 23h6.28a1 1 0 0 0 .99-1.123l-.24-1.683C19.48 18.682 22 15.135 22 11c0-5.523-4.477-10-10-10Zm0 2a8 8 0 0 0-8 8c0 3.51 2.264 6.49 5.43 7.58a1 1 0 0 1 .68.953l.21 1.467h3.36l.21-1.467a1 1 0 0 1 .68-.953C17.736 17.49 20 14.51 20 11a8 8 0 0 0-8-8Z" clip-rule="evenodd"/></svg>
          <span>{t.hero_trust_1}</span>
        </span>
        <span class="flex items-center gap-2">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor" class="text-primary" aria-hidden="true"><path d="M11.644 1.06a1 1 0 0 1 1.012.138l9 8A1 1 0 0 1 21 11h-2v9a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-9H3a1 1 0 0 1-.656-1.802l9-8a1 1 0 0 1 .3-.138ZM7 20h10v-9H7v9Zm-2.414-11H19.414L12 2.857 4.586 9Z"/><path d="M13 13h-2v4h2v-4Z"/></svg>
          <span>{t.hero_trust_2}</span>
        </span>
        <span class="flex items-center gap-2">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor" class="text-primary" aria-hidden="true"><path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12c5.16-1.26 9-6.45 9-12V5l-9-4Zm0 2.18l7 3.12v4.7c0 4.41-3.03 8.53-7 9.6c-3.97-1.07-7-5.19-7-9.6v-4.7l7-3.12Z"/><path d="M11 14.17l4.59-4.58L17 11l-6 6l-3.5-3.5l1.41-1.41L11 14.17Z"/></svg>
          <span>{t.hero_trust_3}</span>
        </span>
      </div>
      
      <!-- Stats Bar -->
      <div class="animate-on-scroll [animation:animationIn_0.8s_ease-out_0.6s_both] grid grid-cols-2 md:grid-cols-4 gap-6 max-w-4xl mx-auto">
        <div class="text-center p-4 rounded-xl bg-primary/[0.08] border border-primary/30 hover:bg-primary/[0.12] hover:border-primary/40 transition-all duration-300 hover:scale-[1.02] cursor-default group">
          <div class="text-3xl md:text-4xl font-bold text-primary mb-1 group-hover:text-white transition-colors"># 1</div>
          <div class="text-xs text-neutral-400 uppercase tracking-wider group-hover:text-neutral-300 transition-colors">{t.stat_first}</div>
        </div>
        <div class="text-center p-4 rounded-xl bg-white/[0.02] border border-white/5 hover:bg-primary/[0.05] hover:border-primary/20 transition-all duration-300 hover:scale-[1.02] cursor-default group">
          <div class="text-3xl md:text-4xl font-bold text-white mb-1 group-hover:text-primary transition-colors">3</div>
          <div class="text-xs text-neutral-400 uppercase tracking-wider group-hover:text-neutral-400 transition-colors">{t.stat_experience}</div>
        </div>
        <div class="text-center p-4 rounded-xl bg-white/[0.02] border border-white/5 hover:bg-primary/[0.05] hover:border-primary/20 transition-all duration-300 hover:scale-[1.02] cursor-default group">
          <div class="text-3xl md:text-4xl font-bold text-white mb-1 group-hover:text-primary transition-colors">5</div>
          <div class="text-xs text-neutral-400 uppercase tracking-wider group-hover:text-neutral-400 transition-colors">{t.stat_regions}</div>
        </div>
        <div class="text-center p-4 rounded-xl bg-white/[0.02] border border-white/5 hover:bg-primary/[0.05] hover:border-primary/20 transition-all duration-300 hover:scale-[1.02] cursor-default group">
          <div class="text-3xl md:text-4xl font-bold text-white mb-1 group-hover:text-primary transition-colors">30</div>
          <div class="text-xs text-neutral-400 uppercase tracking-wider group-hover:text-neutral-400 transition-colors">{t.stat_projects}</div>
        </div>
      </div>
    </div>
  </section>

  <!-- ==================== TRUSTED BY SECTION ==================== -->
  <ClientsMarquee lang={lang} />

  <!-- ==================== SECTION 02: SERVICES CARDS ==================== -->
  <section id="sluzby" class="bg-[#050505] border-t border-white/5 py-24">
    <div class="max-w-7xl mx-auto px-4 sm:px-6">
      <!-- Section Number Bar -->
      <div class="flex flex-col md:flex-row justify-between items-start md:items-end mb-8 text-[10px] md:text-xs font-mono text-neutral-400 uppercase tracking-[0.2em] gap-4">
        <div class="flex items-center gap-2">
          <span class="text-white">02</span>
          <span class="w-12 h-px bg-white/10"></span>
        </div>
        <div class="text-white/40">{t.services_hub_badge}</div>
        <div class="hidden md:block text-right">{lang === 'cs' ? 'NAŠE SLUŽBY' : 'OUR SERVICES'}</div>
      </div>

      <!-- Services Grid with unified header -->
      <ServicesOverviewGrid lang={lang} showHeader={true} showCta={true} showDeliverables={false} />
    </div>
  </section>

  <!-- ==================== SECTION 03: PROCESS (JAK PROBÍHÁ SPOLUPRÁCE) ==================== -->
  <ProcessSection lang={lang} sectionNumber="03" />

  <!-- ==================== SECTION 04: PROBLEM (Z JAKÉHO DŮVODU ORGANIZACE S AI NEUSPĚJÍ) ==================== -->
  <ProblemSection lang={lang} sectionNumber="04" />

  <!-- ==================== SECTION 05: DELIVERABLES (CO OD NÁS ZÍSKÁTE) + CTA ==================== -->
  <DeliverablesGrid lang={lang} sectionNumber="05" showHeader={true} showCta={true} />

  <!-- ==================== SECTION 06: HOW WE WORK ==================== -->
  <section class="bg-[#050505] border-t border-white/5 py-20">
    <div class="max-w-7xl mx-auto px-4 sm:px-6">
      <!-- Section Number Header -->
      <div class="flex flex-col md:flex-row justify-between items-start md:items-end mb-12 text-[10px] md:text-xs font-mono text-neutral-400 uppercase tracking-[0.2em] gap-4">
        <div class="flex items-center gap-2">
          <span class="text-white">06</span>
          <span class="w-12 h-px bg-white/10"></span>
        </div>
        <div class="text-white/40">{t.how_we_work_tag}</div>
        <div class="hidden md:block text-right">{t.how_we_work_label}</div>
      </div>

      <div class="text-center mb-12">
        <h2 class="text-3xl md:text-4xl font-medium text-white tracking-tight">
          {t.how_we_work_headline_1} <span class="text-neutral-500">{t.how_we_work_headline_2}</span>
        </h2>
        <p class="mt-4 text-base text-neutral-400 font-light max-w-xl mx-auto">
          {t.how_we_work_subheadline}
        </p>
      </div>
      <WorkMethodsGrid lang={lang} />
    </div>
  </section>

  <!-- ==================== SECTION 07: TECH STACK ==================== -->
  <TechStackSection lang={lang} />

  <!-- ==================== SECTION 08: VOICEFLOW CERTIFIED EXPERT ==================== -->
  <section class="bg-[#050505] border-t border-white/5 py-16">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 text-center">
      <div class="animate-on-scroll [animation:animationIn_0.8s_ease-out_0.2s_both] inline-flex flex-col md:flex-row items-center gap-6 md:gap-10 p-8 rounded-2xl bg-gradient-to-br from-white/5 to-white/[0.02] border border-white/10 backdrop-blur-sm">
        <!-- Voiceflow Badge -->
        <div class="flex-shrink-0">
          <img src="/assets/images/voiceflow-badge.png" alt="Voiceflow Certified Expert" class="w-24 h-24 md:w-28 md:h-28 object-contain">
        </div>
        
        <!-- Text Content -->
        <div class="text-left">
          <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-primary/10 border border-primary/20 mb-3">
            <iconify-icon icon="solar:verified-check-bold" class="text-primary"></iconify-icon>
            <span class="text-xs font-semibold text-primary uppercase tracking-wider">{t.vf_badge}</span>
          </div>
          <h3 class="text-xl md:text-2xl font-bold text-white mb-2">{t.vf_headline}</h3>
          <p class="text-neutral-400 text-sm md:text-base mb-4 max-w-md">
            {t.vf_desc}
          </p>
          <a href="https://partners.voiceflow.com/tfl9ptojz0xf" target="_blank" rel="noopener noreferrer" class="vf-button" style="--vf-bg: #00A39A; --vf-hover-bg: #00C4B4; --vf-glow-rgb: 0, 196, 180;">
            <div class="vf-points-wrapper">
              <i class="vf-point"></i><i class="vf-point"></i><i class="vf-point"></i><i class="vf-point"></i><i class="vf-point"></i>
              <i class="vf-point"></i><i class="vf-point"></i><i class="vf-point"></i><i class="vf-point"></i><i class="vf-point"></i>
            </div>
            <span class="vf-inner">
              <span>{t.vf_cta}</span>
              <svg class="vf-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5">
                <path d="M5 12h14"></path>
                <path d="m12 5 7 7-7 7"></path>
              </svg>
            </span>
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- ==================== SECTION 09: TESTIMONIALS ==================== -->
  <TestimonialsSection lang={lang} sectionNumber="09" id="reference" />

  <!-- ==================== SECTION 10: CASE STUDIES ==================== -->
  <CaseStudiesSection lang={lang} sectionNumber="10" id="pripadove-studie" />

  <!-- ==================== SECTION 11: RAGus.ai UNIFIED SECTION ==================== -->
  <AdminPanelUnifiedSection lang={lang} sectionNumber="11" id="ragus" />

  <!-- ==================== SECTION 12: ABOUT / PAVEL ==================== -->
  <section class="bg-[#050505] border-t border-white/5 py-24">
    <div class="max-w-7xl mx-auto px-4 sm:px-6">
      <div class="animate-on-scroll [animation:animationIn_0.8s_ease-out_0.2s_both] grid md:grid-cols-2 gap-12 items-center">
        <div class="order-2 md:order-1">
          <div class="inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-primary/10 border border-primary/20 mb-6">
            <iconify-icon icon="solar:user-bold" class="text-primary"></iconify-icon>
            <span class="text-sm font-medium text-primary">{t.about_badge}</span>
          </div>
          <h2 class="text-3xl md:text-4xl font-bold text-white mb-6">
            {t.about_headline}
          </h2>
          <p class="text-neutral-400 mb-6">
            {t.about_desc_1}
          </p>
          <p class="text-neutral-400 mb-8">
            {t.about_desc_2}
          </p>
          
          <!-- Pavel Profile Card with Social Links -->
          <div class="flex items-center gap-4 p-4 bg-white/5 rounded-xl border border-white/10 mb-6">
            <img src="/assets/images/pavel-profile.png" alt="Pavel Čermák" class="w-16 h-16 rounded-full object-cover">
            <div class="flex-1">
              <div class="font-semibold text-white">Pavel Čermák</div>
              <div class="text-sm text-neutral-400">{t.pavel_position}</div>
              <div class="flex flex-col gap-1 mt-2">
                <a href="mailto:pavelcermak@hypedigitaly.ai" class="text-sm text-neutral-400 hover:text-primary flex items-center gap-2 transition-colors">
                  <iconify-icon icon="solar:letter-bold" class="text-primary"></iconify-icon>
                  pavelcermak@hypedigitaly.ai
                </a>
                <a href="tel:+420774996248" class="text-sm text-neutral-400 hover:text-primary flex items-center gap-2 transition-colors">
                  <iconify-icon icon="solar:phone-bold" class="text-primary"></iconify-icon>
                  +420 774 996 248
                </a>
              </div>
            </div>
            <!-- Social Links -->
            <div class="flex items-center gap-3">
              <a href="https://www.linkedin.com/in/cermakai/" target="_blank" rel="noopener noreferrer" class="w-10 h-10 rounded-lg bg-[#0A66C2]/20 border border-[#0A66C2]/30 flex items-center justify-center text-[#0A66C2] hover:bg-[#0A66C2]/30 hover:scale-110 transition-all duration-300" title="LinkedIn">
                <iconify-icon icon="mdi:linkedin" class="text-xl"></iconify-icon>
              </a>
              <a href="https://www.youtube.com/@PavelCermakAI" target="_blank" rel="noopener noreferrer" class="w-10 h-10 rounded-lg bg-[#FF0000]/20 border border-[#FF0000]/30 flex items-center justify-center text-[#FF0000] hover:bg-[#FF0000]/30 hover:scale-110 transition-all duration-300" title="YouTube">
                <iconify-icon icon="mdi:youtube" class="text-xl"></iconify-icon>
              </a>
            </div>
          </div>

          <!-- CTA Button -->
          <a href="#kontakt" class="shiny-cta group inline-flex">
            <span class="btn-content">
              <span class="text-base font-semibold tracking-tight">{t.about_cta}</span>
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 text-white/80 group-hover:translate-x-1 transition-transform">
                <path d="M5 12h14"></path>
                <path d="m12 5 7 7-7 7"></path>
              </svg>
            </span>
          </a>
        </div>
        
        <!-- Right Column: YouTube Video only -->
        <div class="order-1 md:order-2 flex flex-col items-center justify-center">
          <!-- YouTube Video Embed -->
          <div class="w-full max-w-lg aspect-video rounded-2xl overflow-hidden border border-white/10 shadow-lg bg-gray-900">
            <YoutubeFacade videoId="bHMZn4ga9DE" title="Pavel Čermák - AI v praxi" />
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ==================== SECTION 13: FAQ ==================== -->
  <section id="faq" class="bg-[#050505] border-t border-white/5 py-24">
    <div class="max-w-4xl mx-auto px-4 sm:px-6">
      <!-- Section Header -->
      <div class="flex flex-col md:flex-row justify-between items-start md:items-end mb-16 text-[10px] md:text-xs font-mono text-neutral-400 uppercase tracking-[0.2em] gap-4">
        <div class="flex items-center gap-2">
          <span class="text-white">13</span>
          <span class="w-12 h-px bg-white/10"></span>
        </div>
        <div class="text-white/40">// FAQ</div>
        <div class="hidden md:block text-right">{t.faq_label}</div>
      </div>

      <div class="text-center max-w-3xl mx-auto mb-16">
        <h2 class="animate-on-scroll [animation:animationIn_0.8s_ease-out_0.2s_both] leading-[0.95] md:text-5xl lg:text-6xl text-3xl font-medium text-white tracking-tighter mb-8">
          {t.faq_headline}
        </h2>
      </div>

      <!-- FAQ Items -->
      <div class="space-y-4">
        {faqData.items.map((item, index) => (
          <div class={`animate-on-scroll [animation:animationIn_0.8s_ease-out_${0.3 + index * 0.1}s_both] faq-item border border-white/5 rounded-xl overflow-hidden bg-[#0A0A0A]`}>
            <button class="faq-trigger w-full flex items-center justify-between p-6 text-left">
              <span class="text-lg font-medium text-white">{lang === 'cs' ? item.question_cs : item.question_en}</span>
              <iconify-icon icon="solar:alt-arrow-down-linear" class="faq-icon text-2xl text-neutral-400 transition-transform"></iconify-icon>
            </button>
            <div class="faq-answer">
              <div class="px-6 pb-6 text-neutral-400">
                {lang === 'cs' ? item.answer_cs : item.answer_en}
              </div>
            </div>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- ==================== SECTION 14: FINAL CTA / CONTACT ==================== -->
  <section id="kontakt" class="bg-[#050505] border-t border-white/5 py-24">
    <div class="max-w-7xl mx-auto px-4 sm:px-6">
      <!-- Section Header -->
      <div class="flex flex-col md:flex-row justify-between items-start md:items-end mb-16 text-[10px] md:text-xs font-mono text-neutral-400 uppercase tracking-[0.2em] gap-4">
        <div class="flex items-center gap-2">
          <span class="text-white">14</span>
          <span class="w-12 h-px bg-white/10"></span>
        </div>
        <div class="text-white/40">{t.cta_tag}</div>
        <div class="hidden md:block text-right">{t.cta_label}</div>
      </div>

      <div class="text-center max-w-5xl mx-auto mb-16">
        <h2 class="animate-on-scroll [animation:animationIn_0.8s_ease-out_0.2s_both] leading-[0.95] md:text-6xl lg:text-7xl text-3xl font-medium text-white tracking-tighter mb-8">
          <span>{t.cta_headline_1}</span>
          <span class="text-neutral-500 transition-colors hover:text-primary duration-500">{t.cta_headline_2}</span>
        </h2>
        <p class="animate-on-scroll [animation:animationIn_0.8s_ease-out_0.3s_both] text-lg text-neutral-400 font-light max-w-2xl mx-auto leading-relaxed">
          {t.cta_subheadline}
        </p>
      </div>

      <!-- Cal.com Widget with Lazy Loading -->
      <div class="animate-on-scroll [animation:animationIn_0.8s_ease-out_0.4s_both] max-w-4xl mx-auto mb-12">
        <div class="bg-[#0A0A0A] border border-white/5 rounded-2xl p-8">
          <div class="text-center mb-8">
            <h3 class="text-2xl font-bold text-white mb-2">{t.cal_title}</h3>
            <p class="text-neutral-400">{t.cal_desc}</p>
          </div>
          <!-- Cal inline embed with lazy loading -->
          <div style="width:100%;height:630px;overflow:auto" id="my-cal-inline-30-min-online" data-cal-lazy>
            <!-- Loading placeholder -->
            <div class="flex items-center justify-center h-full">
              <div class="text-center">
                <div class="inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-primary mb-4"></div>
                <p class="text-neutral-400 text-sm">{t.cal_title}</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Alternative Contact -->
      <div class="animate-on-scroll [animation:animationIn_0.8s_ease-out_0.5s_both] text-center">
        <p class="text-neutral-400 mb-6">{t.contact_alt}</p>
        <div class="flex flex-wrap items-center justify-center gap-6">
          <a href="mailto:info@hypedigitaly.ai" class="flex items-center gap-2 px-4 py-2 bg-white/5 border border-white/10 rounded-lg text-neutral-300 hover:text-white hover:border-white/20 transition-colors">
            <iconify-icon icon="solar:letter-bold" class="text-primary"></iconify-icon>
            <span>info@hypedigitaly.ai</span>
          </a>
          <a href="tel:+420774996248" class="flex items-center gap-2 px-4 py-2 bg-white/5 border border-white/10 rounded-lg text-neutral-300 hover:text-white hover:border-white/20 transition-colors">
            <iconify-icon icon="solar:phone-bold" class="text-primary"></iconify-icon>
            <span>+420 774 996 248</span>
          </a>
          <a href="https://linkedin.com/company/hypedigitaly" target="_blank" class="flex items-center gap-2 px-4 py-2 bg-white/5 border border-white/10 rounded-lg text-neutral-300 hover:text-white hover:border-white/20 transition-colors">
            <iconify-icon icon="mdi:linkedin" class="text-primary"></iconify-icon>
            <span>LinkedIn</span>
          </a>
        </div>
        
        <!-- Trust badges -->
        <div class="flex flex-wrap items-center justify-center gap-6 mt-8 text-sm text-neutral-400">
          <span class="flex items-center gap-2">
            <iconify-icon icon="solar:shield-check-bold" class="text-primary"></iconify-icon>
            <span>{t.cta_trust_1}</span>
          </span>
          <span class="flex items-center gap-2">
            <iconify-icon icon="solar:clock-circle-bold" class="text-primary"></iconify-icon>
            <span>{t.cta_trust_2}</span>
          </span>
          <span class="flex items-center gap-2">
            <iconify-icon icon="solar:map-point-bold" class="text-primary"></iconify-icon>
            <span>{t.cta_trust_3}</span>
          </span>
        </div>
      </div>
    </div>
  </section>

  <script is:inline>
    // Lazy-load Cal.com embed using Intersection Observer
    (function() {
      const calContainer = document.getElementById('my-cal-inline-30-min-online');
      if (!calContainer) return;

      const observer = new IntersectionObserver(function(entries) {
        if (entries[0].isIntersecting) {
          // Element is visible, load Cal.com
          observer.disconnect();
          
          // Remove placeholder
          calContainer.innerHTML = '';
          
          // Load Cal.com script and initialize
          (function (C, A, L) { 
            let p = function (a, ar) { a.q.push(ar); }; 
            let d = C.document; 
            C.Cal = C.Cal || function () { 
              let cal = C.Cal; 
              let ar = arguments; 
              if (!cal.loaded) { 
                cal.ns = {}; 
                cal.q = cal.q || []; 
                d.head.appendChild(d.createElement("script")).src = A; 
                cal.loaded = true; 
              } 
              if (ar[0] === L) { 
                const api = function () { p(api, arguments); }; 
                const namespace = ar[1]; 
                api.q = api.q || []; 
                if(typeof namespace === "string"){ 
                  cal.ns[namespace] = cal.ns[namespace] || api; 
                  p(cal.ns[namespace], ar); 
                  p(cal, ["initNamespace", namespace]); 
                } else p(cal, ar); 
                return;
              } 
              p(cal, ar); 
            }; 
          })(window, "https://app.cal.com/embed/embed.js", "init");
          Cal("init", "30-min-online", {origin:"https://app.cal.com"});
          Cal.ns["30-min-online"]("inline", {
            elementOrSelector:"#my-cal-inline-30-min-online",
            config: {"layout":"month_view","theme":"light"},
            calLink: "hypedigitaly-pavelcermak/30-min-online",
          });
          Cal.ns["30-min-online"]("ui", {"theme":"light","cssVarsPerTheme":{"light":{"cal-brand":"#00A39A"}},"hideEventTypeDetails":false,"layout":"month_view"});
        }
      }, {
        rootMargin: '100px' // Start loading 100px before it becomes visible
      });

      observer.observe(calContainer);
    })();
  </script>
</PageLayout>
